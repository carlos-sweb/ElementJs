<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ElementJs.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ElementJs.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>//     ElementJs.js 1.0.0
//     (c) 2016-2020 Carlos Enrique Illesca Monsalve
//     ElementJs may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://elementjs.netlify.com
(function (factory) {
  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.
  // We use `self` instead of `window` for `WebWorker` support.
  var root = typeof self == 'object' &amp;&amp; self.self === self &amp;&amp; self ||
            typeof global == 'object' &amp;&amp; global.global === global &amp;&amp; global;
  // Set up Backbone appropriately for the environment. Start with AMD.
  if (typeof define === 'function' &amp;&amp; define.amd) {
    define(['underscore', 'jquery', 'exports'], function(_, $, exports) {
      // Export global even in AMD case in case this script is loaded with
      // others that may still expect a global Backbone.
      root.ElementJs = factory(root, exports, _, $);
    });
  // Next for Node.js or CommonJS. jQuery may not be needed as a module.
  } else if (typeof exports !== 'undefined') {
    var _ = require('underscore'), $;
    try { $ = require('jquery'); } catch (e) {}
    factory(root, exports, _, $);

  // Finally, as a browser global.
  } else {
    root.ElementJs = factory(root, {}, root._, root.jQuery || root.Zepto || root.ender || root.$);
  }
})(function(root, ElementJs, _, $){

'use strict';




let ObjectRegister = function(name,{o,d}){

	this.name = name;
	this.iden = this.name+_.uniqueId("_");

	this.o = o || [];
	this.d = d || {};
	this.clone = function(o){
		let o_vtr;
		try{
			o_vtr = JSON.parse(JSON.stringify(o));	
		}catch(e){
			console.log("Error ObjectRegister",e);
			o_vtr = {};
		}
		return o_vtr;
	};
	this.get = function(obj,data){
		let o = this.clone(this.o);
		let d = this.clone(this.d);
		return _.object(["o",'d'],[o,d]) ;
	}
	this.render = function(){
			
		let o = this.clone(this.o);
		let d = this.clone(this.d);
		return  _.template(create(o))(d);
	}
}


/**
 * @function TAG_notclose
 * @author Carlos Illesca &lt;c4rl0sill3sc4@gmail.com>
 * @param {strimg} Tag - Etiqueta para saber si es necesario la declaración de cierre
 * @returns {boolean}  
 */
const TAG_notclose = function( tag ){
	return _.indexOf(['img','meta','link','script','br'],tag) != -1;
};
// function register components
var register = function(name,obj,data){

	const _data = data || {};
	const _obj = obj || {};

	if( _.isObject(_obj) ){
		if( !_.isEmpty(_obj) ){
			this._components[name] =  new ObjectRegister(name,Object.assign({}, {"o":_obj,"d":_data})) ;
			
		};
	};
};

/**
 * @function createAttr
 * @author Carlos Illesca &lt;c4rl0sill3sc4@gmail.com>
 * @param {(string|object)} attributes - Listado de attributos para ingresar en el elemento
 * @returns {string} cadena con los attributos html formateados en su formato ejemplo: id="myid" name="myname"
 */
var createAttr = function(attr){
	var _attr = "";
	if( _.isObject(attr) ){
		for( const _name in attr ){
			_attr +=_name+"='"+attr[_name]+"' ";
		};	
	}else if ( _.isString(attr) ){
		const ArrayAttr = attr.split("|");
	    for(const _iden in ArrayAttr){
	    	 const __name = ArrayAttr[_iden].split("@");
	    	 if(!_.isUndefined(__name[1])){
	    	 	_attr +=  __name[0]+"='"+ __name[1] +"' " 
	    	 }else{
	    	 	_attr+= __name[0]+" ";
	    	 };
	    	
	    };
	};
	return _attr === "" ? "":" "+_attr;
}

/**
 * @function create
 * @author Carlos Illesca &lt;c4rl0sill3sc4@gmail.com>
 * @param {(object|Array)} objHtml - Objecto o Array para la construcción del componente html
 * @returns {string} cadena en formato html
 */
var create = function(objHtml){

		
		if(  !_.isFunction(objHtml.forEach)  ){ objHtml=[objHtml]   };	
		
		var EString = ""
		for(var i = 0; i &lt; objHtml.length;i++){

			if(objHtml[i].constructor.name == 'Object'){
				 const tag  = objHtml[i].tag || objHtml[i].t || "div" ;
				 const beforeContent = objHtml[i].beforeContent || objHtml[i].bc || "";
				 const afterContent = objHtml[i].afterContent || objHtml[i].ac || "";
				 
				 const notClose = _.indexOf(['img','meta','link','script','br'],tag) != -1;

				 const attr = objHtml[i].attr || objHtml[i].a || {};
				 const attrString = createAttr(attr);
				 const each = objHtml[i].each || null;

				 const children = objHtml[i].children || objHtml[i].c || null;
				 
				 const _if = objHtml[i].i || null;
				 
				 if(notClose){
				 	 EString += "&lt;"+tag+" "+attrString+">";
				 }else{
				 	
				 	EString += _.isNull(_if) ? "":"&lt;% if("+_if+"){ %>";
				 	EString += _.isNull(each) ? "" : 
				 	"&lt;% if(typeof "+each+" !== 'undefined' ) _.each("+each+",function(item,iterator){%>";
					EString += "&lt;"+tag+attrString+">";
					EString += beforeContent;
					if(!_.isNull(children)){
						EString += create(children);
					};
					EString += afterContent;
					EString += "&lt;/"+tag+">"; 
					EString += _.isNull(each) ? "" : "&lt;%})%>";
					EString += _.isNull(_if) ? "":"&lt;%}%>";

				 };
			}else{
				
				EString += _.template(create(objHtml[i]["o"]))(objHtml[i]["d"]);
			};
		};
		return EString;
};

var get = function(type){
		return this.EString;	
};


return {
	extend:function(options){
		return  function(options){
			this.dataVars = {};
			// define content for components
			this._components = {};
			
			this.options = options || {}
			
			this.TAG_notclose = TAG_notclose;
			// function register components
			this.register = register.bind(this)
			// function create String html Structure
			this.create = function(objHtml){
				this.EString = create(objHtml);
			}
			
			this.get = get.bind(this)

			this.getTemplate = function(dataVars){
				_.extend(this.dataVars,dataVars)
				return _.template(this.get())(this.dataVars);
			}
			
			this.clone = function(o){
				return JSON.parse(JSON.stringify(o))
			}

			this.components = function({name,extend,data}){

				const components = this._components[name] || {};
				
				const clone = this.clone(components)
				
				data = data || {};

				_.extend(clone["d"],data);	

				extend = extend || {};
				
				_.extend(clone["o"],extend)
				
				
				return new ObjectRegister(clone.name,{o:clone.o,d:clone.d});

			};

		}.bind(this,options)
	}
}
})</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#create">create</a></li><li><a href="global.html#createAttr">createAttr</a></li><li><a href="global.html#TAG_notclose">TAG_notclose</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Mon Mar 23 2020 22:25:53 GMT-0300 (-03)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
